# FAT 파일 시스템

 빌 게이츠가 자사 제품인 basic에서 플로피디스크를 관리하기 위해 개발됨.

여러 파일 시스템 중 가장 간단한 구조. 볼륨 맨 위에 존재하는 FAT(파일 할당 테이블) 영역에서 파일들을 관리함. FAT 영역이 손상되는 것을 막기 위해 FAT1 / FAT2로 나누어 복사본을 저장, 관리.

데이터 영역은 클러스터로 관리. 나머지 부분은 섹터로 관리함.

윈도우 이전 버전들과 호환성이 좋음.

FAT을 업데이터 하는 과정에서 오버헤드가 큼.

매우 작은 오버헤드로 시작하기 때문에 200MB 이하의 파티션이 적합함.

볼륨 크기가 200MB를 넘어가면 성능이 급격하게 저하되므로 200MB 이상의 파티션에 부적합함.





- FAT 12 :  FAT시스템의 표준. 플로피 디스크 저장용

- FAT 16 : 하드디스크 지원. 최대 2GB 지원

- FAT 32 : 최대 볼륨 2TB까지 지원. 최신 버전



- VFAT : 32bit 보호모드에 적합하도록 수정, 성능향상 LFNs(long file names = 긴 파일 이름) 지원

- exFAT : NTFS 파일 시스템이 오버 헤드 등의 문제로 적절치 못한 경우, 또는 FAT 파일 시스템의 파일 크기/ 디렉토리 제약 문제가 되는 경우 사용될 수 있다.
  - 자유 공간 비트맵 도입으로 공간 할당 및 삭제 성능 개선



![사용자 삽입 이미지](https://t1.daumcdn.net/tistoryfile/fs8/7_29_1_29_blog112630_attach_0_0.PNG?original)

FAT 파일 시스템을 구성하는 메타 데이터는 다음과 같다.

#### PBR

Partitiion Boot Record 의 약자로서 파티션에 대한 전반적인 정보를 저장하고 있다. 가장 핵심적인 부분.



#### Reserved

 특수한 용도 (Root Directory의 시작위치를 조절하거나 특수한 데이터를 저장할 용도)로 사용되는 공간이다. 존재하지 않을 수도 있다.



#### FAT 1 or 2

클러스터 풀의 클러스터 체인을 구성하는 부분. 뒤에 오는 data cluster 의 개수에 따라 가변적인 크기를 가진다. 

FAT 1과 FAT 2는 같은 데이터를 가지며, 1만 존재할 수도 있다.



#### Root Directory

 파일 시스템의 최상위 디렉토리. FAT 12와 FAT 16에선 섹터 단위로 설정할 수 있고, FAT 32의 경우 클러스터 체인으로 설정할 수 있다.



#### FSInfo

FAT32에만 존재하는 항목으로, FAT32에 존재하는 기타정보를 포함하는 영역이다.



#### Backup Area

 FAT32 에만 존재하는 영역으로, 여태 있었던 모든 메타 데이터들을 복사하여 파일 시스템에 문제가 생기면 데이터를 다시 복사하여 복원하는 역할을 한다.









## DOS 파티션 테이블

가장 많이 알려진 도스 파티션 테이블은 리눅스나 윈도우에서 사용한다. 총 4개의 파티션을 기록할 수 있으며, 파티션 1개의 정보는 16바이트로 표현한다.

 파티션 테이블 개수의 한계를 극복하기 위해 확장 파티션을 지원하며 이를 이용하면 논리적으로 생성할 수 있는 파티션의 개수의 제한이 사라지게 되지만 오히려 도스 파티션 테이블을 복잡하게 만든 주범이기도 하다.











