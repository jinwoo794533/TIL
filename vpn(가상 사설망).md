# VPN(가상 사설망)이란?

 vpn이란 virtual private network의 약어로써, 공중망을 통해 가상의 사설망을 만든다는 개념이다. 

회사로 비유하자면 본사(서울 지점)과 부산 지점, 대전 지점이 있는데 이 세 지점을 하나의 사내 사설망으로 연결하기 위해선 물리적으로 모든 지점에 회선을 연결하겠지만 실제로 그렇게 연결하기는 정말 힌든 일이며, 정말 어마어마한 돈이 들 것이다. 우리나라 안에서면 거기서 끝이겠지만 만약 미국 같은 나라에서 뉴욕 지점과 LA 지점을 물리적인 회선으로 연결하기란 절대 불가능하다. 



그렇기에 우린 가상 사설망을 만들었는데..... 원리는 간단하다.

![vpn](file:///Users/anjin-u/Desktop/vpn.png?lastModify=1621776732)



A지점과 B지점이 있을 때 두 지점을 인터넷 공공망을 통해 연결하되, 암호를 통하여 연결함으로써 외부에서 파일을 볼 수 없도록 한다는 것을 터널링이라 부르고, 이것이 vpn의 핵심이다. 그리고 이들의 대표적인 것들에는 

- PPTP (2계층)

   PPTP란 Point to Point Tunneling Protocol의 줄임말로, 가장 오래된 VPN 프로토콜 중 하나이며, 아직도 사용되고 있다. PPTP에서는 패킷을 캡슐화하여 ip네트워크에 전송한다. 이름부터 point to point 답게 일대일 통신만 가능하다.

  

- L2F (2계층)

   L2F는 Layer 2 Forwarding의 준말로, PPTP와 달리 하나의 터널에 여려 개의 연결을 지원한다.

- L2TP (2계층)

   L2TP는 L2f와 PPTP가 결합한 것으로, 보안에 더 초점을 맞추었다.

- IPSec (3계층)

   IPSec은 위의 것들과 다르게 인터넷 프로토콜 스위트이다. 프로토콜 스위트란 TCP/IP처럼 여러 프로토콜의 모음이다. 그래서 IPSec에는 두 가지 프로토콜이 존재하는데, 하나는 AH(Authentication Header) : 인증헤더이고, 또 하나는 ESP(Encapsulating Security Payload)이다.  하지만 이를 다 설명하기엔 힘드므로..... 

  그리고 IPSec은 기밀성, 무결성, 인증, 리플레이방지 등을 제공한다.



그렇다면 우리가 흔히 아는 크롬 vpn들은 뭘까?





그것들도 저것과 같은 원리이다. A가 클라이언트라고 한다면 vpn을 통해 B라는 서버에 접근한 뒤 IP주소를 바꾼 것이다. 하지만 밖에서는 내부 사설망을 볼 수 없기에 서버 ip를 통해 접속하고 있는 사람이 누구인지, 원래 어디서 왔는지 알기 위해선 직접 서버를 뜯어오는 수 밖에 없다. 그렇기에 우리가 vpn을 믿을 수 있는 것이다. 하지만 만약 vpn 서버가 속해있는 국가에서 요구한다면? 서버 회사는 그것을 거부하기 어려울 것이다. 그렇기에 많은 vpn 업체들이 "로그 기록 삭제 보장!!" 같은 광고를 내는 것이다. 서버에 로그 기록이 없다면 국가가 온다 해도 제대로 알기 힘들 것이기에..... 하지만 유료라면 몰라도 무료 vpn 같은 경우는 vpn회사가 로그를 유출할 수도 있으니 조심하자.